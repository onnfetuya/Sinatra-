<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>BBS</title>
</head>
<body>
  <h1>BBS</h1>
  <ul>
      <B>comments ( name ) [del]</B>
      <% @comments.each do |comment|%>
      <li data-id="<%= comment.id %>">
        <%= h comment.body %> (
        <%= h comment.name %> )
          <span class="deleteCmd" style="cursor:pointer;color:blue">[x]</span>
       </li>
      <%end%>
   </ul>
  <h2>Add New</h2>
  <form method="post" action="/new">
    comment: <input type="text" name="body">
    name   : <input type="text" name="name">
    <input type="submit" value="post!">
  </form>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script>
    $('.deleteCmd').click(function() {
      var el=$(this).parent();
      if(confirm('are you sure to delete?')){
        $.post('/delete', {
          id: el.data('id')
        }, function(){
          el.fadeOut(800);
        });
      }
    })
  </script>
</body>
</html>